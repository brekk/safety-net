'use strict';Object.defineProperty(exports,'__esModule',{value:!0});function _interopDefault(a){return a&&'object'==typeof a&&'default'in a?a['default']:a}var fUtility=require('f-utility'),Future=require('fluture'),Future__default=_interopDefault(Future),entrust=require('entrust'),version='0.0.1',guided=fUtility.curry(function(a,b){return Future.isFuture(b)?b:a(b)}),GuidedLeft=guided(Future.reject),GuidedRight=guided(Future.of),plural=function(a){return 1<a.length?'s':''},expectFunctionProps=fUtility.curry(function(a,b){return new Error(a+': Expected '+b.join(', ')+' to be function'+plural(b)+'.')}),rejectNonFunctions=fUtility.reject(fUtility.isFunction),safeRailInputs=fUtility.pipe(rejectNonFunctions,Object.keys),anchor=fUtility.curry(function(a,b,c){if(null==c)return GuidedLeft(new Error('anchor: Expected to be given non-null input.'));var d=safeRailInputs({assertion:a,wrongPath:b});return 0<d.length?GuidedLeft(expectFunctionProps('anchor',d)):(a(c)?GuidedRight:fUtility.pipe(b,GuidedLeft))(c)}),allPropsAreFunctions=fUtility.pipe(fUtility.reject(fUtility.isFunction),Object.keys,fUtility.length,function(a){return 0===a}),judgement=fUtility.curryObjectK(['jury','law','input'],function(a){var b=a.jury,c=a.law,d=a.input,e=a.deliberation;void 0===e&&(e=fUtility.I);var f=a.pre;void 0===f&&(f=fUtility.I);var g=a.post;return void 0===g&&(g=fUtility.I),fUtility.pipe(c,fUtility.pipe(f,e,g),b)(d)}),judgeObject=fUtility.curryObjectK(['jury','law','input'],function(a){var b=a.jury,c=a.law,d=a.input,e=a.pre;void 0===e&&(e=fUtility.I);var f=a.post;return void 0===f&&(f=fUtility.I),judgement({deliberation:Object.keys,pre:e,post:f,jury:b,law:c,input:d})}),safeWarn=fUtility.curry(function(a,b){return judgeObject({deliberation:fUtility.I,jury:expectFunctionProps(a),law:rejectNonFunctions,input:b})}),safetyNet=fUtility.curry(function(a,b,c,d){return new Future__default(function(e,f){var g={assertion:a,wrongPath:b,rightPath:c};return allPropsAreFunctions(g)?fUtility.pipe(anchor(a,b),fUtility.map(c),fUtility.fork(e,f))(d):e(safeWarn('safetyNet',g))})}),syncCase=fUtility.curry(function(b,c){return new Future.Future(function(d,e){for(var f=0;f<b.length;f++){var a=b[f],g=a[0],h=a[1];if(!g(c))return d(h(c))}return e(c)})}),asyncCase=fUtility.curry(function(b,c){return new Future.Future(function(d,e){for(var f=0;f<b.length;f++){var a=b[f],g=a[0],h=a[1];if(!g(c))return d(h(c))}return e(c)})}),tether=fUtility.curry(function(a,b,c){return fUtility.map(b,Future.isFuture(c)?fUtility.chain(asyncCase(a),c):syncCase(a,c))}),bimap=entrust.e2('bimap'),map$1=fUtility.map,chain$1=fUtility.chain;exports.map=map$1,exports.chain=chain$1,exports.version=version,exports.safetyNet=safetyNet,exports.anchor=anchor,exports.tether=tether,exports.ap=fUtility.ap,exports.fold=fUtility.fold,exports.fork=fUtility.fork,exports.bimap=bimap,exports.GuidedLeft=GuidedLeft,exports.GuidedRight=GuidedRight,exports.guided=guided;
